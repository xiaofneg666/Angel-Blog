// 敏感词列表
const sensitiveWords = {
  // 不文明用语
  vulgar: [
    '装逼', '草泥马', '特么的', '撕逼', '玛拉戈壁', '爆菊', 'JB', '呆逼', '本屌', 
    '齐B短裙', '法克鱿', '丢你老母', '达菲鸡', '装13', '逼格', '蛋疼', '傻逼', 
    '绿茶婊', '你妈的', '表砸', '屌爆了', '买了个婊', '已撸', '吉跋猫', '妈蛋', 
    '逗比', '我靠', '碧莲', '碧池', '然并卵', '日了狗', '屁民', '吃翔', 'XX狗', 
    '淫家', '你妹', '浮尸国', '滚粗'
  ],
  
  // 欺骗用户词语
  deceptive: [
    '恭喜获奖', '全民免单', '点击有惊喜', '点击获取', '免费领取', '领取奖品', 
    '非转基因更安全'
  ],
  
  // 刺激消费词语
  consumption: [
    '秒杀', '抢爆', '再不抢就没了', '不会再便宜了', '万人疯抢', '抢疯了'
  ],
  
  // 迷信、恐怖、暴力用语
  superstition: [
    '算命', '算卦', '神仙', '保佑', '玉皇大帝', '王母', '鬼怪', '精灵', '如来', 
    '佛祖', '财神', '灶神', '门神', '大仙', '魔鬼', '地狱', '报应', '带来好运气', 
    '增强第六感', '化解小人', '增加事业运', '招财进宝', '健康富贵', '提升运气', 
    '有助事业', '护身', '平衡正负能量', '消除精神压力', '调和气压', '逢凶化吉', 
    '时来运转', '万事亨通', '旺人', '旺财', '助吉避凶', '转富招福'
  ],
  
  // 民族、种族、性别歧视用语
  discrimination: [
    '回回', '靴子', '高丽棒子', '老毛子', '黑鬼', '血统', '杂种', '东亚病夫', 
    '蛮夷', '大男人', '小女人', '男尊女卑', '重男轻女', '洋鬼子', '小日本', 
    '大汉族主义'
  ],
  
  // 化妆品虚假宣传用语
  cosmetics: [
    '特效', '高效', '全效', '强效', '速效', '速臼', '一洗白', '见效', '超强', 
    '激活', '全方位', '全面', '安全', '无毒', '溶脂', '吸脂', '燃烧脂肪', 
    '瘦身', '瘦脸', '瘦腿', '减肥', '延年益寿', '提高记忆力', '提高肌肤抗刺激', 
    '消除', '清除', '化解死细胞', '去皱', '平皱', '修复断裂弹性纤维', '止脱', 
    '永不褪色', '迅速修复', '更新肌肤', '破坏黑色素细胞', '阻断黑色素', '丰乳', 
    '丰胸', '乳房丰满', '预防乳房松弛下垂', '改善睡眠', '舒眠'
  ],
  
  // 医疗用语
  medical: [
    '调整人体内分泌', '增强免疫力', '助眠', '失眠', '滋阴补阳', '壮阳', '消炎', 
    '促进新陈代谢', '减少红血丝', '优化细胞结构', '修复受损肌肤', '治愈', '抗炎', 
    '活血', '解毒', '抗敏', '脱敏', '减肥', '清热解毒', '清热袂湿', '治疗', 
    '除菌', '杀菌', '抗菌', '灭菌', '防菌', '消毒', '排毒', '防敏', '柔敏', 
    '舒敏', '缓敏', '褪敏', '改善敏感肌肤', '改善过敏现象', '降低肌肤敏感度', 
    '镇定', '镇静', '理气', '行气', '生肌肉', '补血', '安神', '养脑', '益气', 
    '通脉', '胃胀蠕动', '利尿', '驱寒解毒', '调节内分泌', '延缓更年期', '补肾', 
    '祛风', '生发', '防癌', '抗癌', '祛疤', '降血压', '防治高血压', '改善内分泌', 
    '平衡荷尔蒙', '防止卵巢及子宫的功能紊乱', '去除体内毒素', '吸附铅汞', '除湿', 
    '润燥', '治疗腋臭', '治疗体臭', '治疗阴臭', '美容治疗', '消除斑点', '斑立净', 
    '无斑', '治疗斑秃', '逐层减退多种色斑', '妊娠纹', '毛发新生', '毛发再生', 
    '生黑发', '止脱', '生发止脱', '脂溢性脱发', '病变性脱发', '毛囊激活', '酒糟鼻', 
    '伤愈合', '清除毒素', '缓解痉孪', '减轻症状', '处方', '药方', '临床观察', 
    '丘疹', '脓疤', '手癣', '甲癣', '体癣', '头癣', '股癣', '脚癣', '脚气', 
    '鹅掌癣', '花斑癣', '牛皮癣', '传染性湿疹', '伤风感冒', '经痛', '肌痛', 
    '头痛', '腹痛', '便秘', '哮喘', '支气管炎', '消化不良', '刀伤', '烧伤', 
    '烫伤', '疮痈', '毛囊炎', '皮肤感染', '皮肤痉孪', '细菌', '真菌', '念珠菌', 
    '糠批抱子菌', '厌氧菌', '牙抱菌', '座疮', '毛囊寄生虫', '雌性激素', '雄性激索', 
    '荷尔蒙', '抗生素', '激素', '药物', '中草药', '中枢神经', '细饱再生', 
    '细胞增殖和分化', '免疫力', '患处', '疤痕', '关节痛', '冻疮', '冻伤', 
    '皮肤细胞间的氧气交换', '红肿', '淋巴液', '毛细血竹', '淋巴毒'
  ]
};

// 检查文本是否包含敏感词
function checkSensitiveWords(text) {
  if (!text) return { hasSensitiveWords: false, words: [] };
  
  const foundWords = [];
  const allCategories = Object.values(sensitiveWords).flat();
  
  for (const word of allCategories) {
    if (text.includes(word)) {
      foundWords.push(word);
    }
  }
  
  return {
    hasSensitiveWords: foundWords.length > 0,
    words: foundWords
  };
}

// 检查文章内容
function checkArticle(article) {
  const titleCheck = checkSensitiveWords(article.title);
  const contentCheck = checkSensitiveWords(article.content);
  const excerptCheck = checkSensitiveWords(article.excerpt);
  
  const allFoundWords = [
    ...titleCheck.words,
    ...contentCheck.words,
    ...excerptCheck.words
  ];
  
  return {
    hasSensitiveWords: allFoundWords.length > 0,
    words: [...new Set(allFoundWords)], // 去重
    details: {
      title: titleCheck.words,
      content: contentCheck.words,
      excerpt: excerptCheck.words
    }
  };
}

module.exports = {
  checkSensitiveWords,
  checkArticle
}; 